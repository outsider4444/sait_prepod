{% extends 'base.html' %}
{% load poll_extras %}

{% block content %}
    <a href="{% url 'admin-trpo_students_marks_create' %}" class="btn btn-primary"> Создать новую оценку</a>

    <form action="{% url 'admin-trpo-filtred_students_marks' %}" method="get">
        {% csrf_token %}
        {{ mark_filter.form }}
        <button type="submit">Поиск</button>
    </form>

    <table id="id_students_list" class="table table-responsive">
        <thead class="thead-dark">
        <tr>
            <th>#</th>
            {% for date in delta_date %}
                <th>{{ date }}</th>
            {% endfor %}
        </tr>
        </thead>
        <tbody>
        {% for stud in marks|values:"users_code"|distinct %}
                <tr>
                    <td>{{ stud.name }} {{ stud.surname }}</td>
                    {% for days in delta_days %}
                        <td>
                            {% for marks_date in marks %}
                                {% if marks_date.date|string == days %}
                                    {{ marks_date.mark }}
                                {% endif %}
                            {% endfor %}
                        </td>
                    {% endfor %}
                </tr>
            {% endfor %}
        <tr>{% for days in delta_days %}
            <td>
                {% for marks_date in marks %}
                    {% if marks_date.date|string == days %}
                        {{ marks_date.comment }}
                    {% endif %}
                {% endfor %}
            </td>
        {% endfor %}</tr>
        </tbody>
    </table>

    <script>
    let id_start_date = document.getElementById('id_start_date');id_start_date.required = true;
    let id_end_date = document.getElementById('id_end_date');id_start_date.required = true;
    id_group = document.getElementById('id_group');

    </script>

{% endblock content %}