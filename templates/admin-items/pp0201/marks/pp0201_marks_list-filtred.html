{% extends 'base.html' %}
{% load poll_extras %}

{% block content %}
    <a href="{% url 'admin-pp0201_students_marks_create' %}"> Создать новую оценку</a>

    <form action="{% url 'admin-pp0201-filtred_students_marks' %}" method="get">
        {% csrf_token %}
        {{ mark_filter.form }}
        <button type="submit">Поиск</button>
    </form>

        <table id="id_students_list" class="table table-responsive table-bordered">
            <thead class="thead-dark">
            <tr>
                <th>#</th>
                {% for date in delta_date %}
                    <th>{{ date }}</th>
                {% endfor %}
            </tr>
            </thead>
            <tbody>
            {% for stud in marks|values:"users_code"|distinct %}
                <tr>
                    <td>{{ stud.name }} {{ stud.surname }}({{ stud.group }})</td>
                    {% for days in date_days %}
                        <td>
                            {% for marks_date in marks %}
                                {% if marks_date.date.day == days %}
                                    {% if marks_date.users_code == stud %}
                                        {{ marks_date.mark }}
                                    {% endif %}
                                {% endif %}
                            {% endfor %}
                        </td>
                    {% endfor %}
                </tr>
                <tr>
                    <td>Средний балл</td>
                    <td>
                        {% for key, values in dic_sr_ball.items %}
                            {% if key == stud.id %}
                                {{ values }}
                            {% endif %}
                        {% endfor %}
                    </td>
                </tr>
{#                <tr> <td>Комментарий</td>#}
{#                    {% for date in date_days  %}#}
{#                        <td>#}
{#                            {% for marks_date in marks %}#}
{#                                {% if marks_date.date.day == date %}#}
{#                                    {{ marks_date.comment }}#}
                                    {#                        {{ date }}#}
{#                                {% endif %}#}
{#                            {% endfor %}#}
{#                        </td>#}
{#                    {% endfor %}#}
{#                </tr>#}
            {% endfor %}
            </tbody>
        </table>

    <script>
        let id_start_date = document.getElementById('id_start_date');
    id_start_date.required = true;
    let id_end_date = document.getElementById('id_end_date');
    id_start_date.required = true;
    id_group = document.getElementById('id_group');

    </script>

{% endblock content %}